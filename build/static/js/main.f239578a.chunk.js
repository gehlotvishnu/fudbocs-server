(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{139:function(e,t,a){},141:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(22),c=a.n(r),o=a(150),i=a(152),s=a(151),u=a(77),d=a(149),m=(a(87),a(8)),h=a(9),p=a(11),E=a(10),f=a(12),y=a(1),g=a(48),b=a.n(g),S=(a(89),a(90),a(31)),v=a.n(S),k=(a(59),a(20)),C=a.n(k);function A(){var e=JSON.parse(localStorage.getItem("fudbocs"));return e&&e.token?{Authorization:"Basic "+e.token}:{}}var _=window.location.href.split("/"),w=_[0]+"//"+_[2]+"/",I=function(e){return new Promise(function(t,a){C()("/api/schedule/add",{method:"POST",data:e,headers:A()}).then(function(e){t(e.data)}).catch(function(e){console.log(e),a(e)})})},B=function(e){return new Promise(function(t,a){C()("/api/schedule/getBy?customerId="+e.customerId+"&date="+e.date+"&role="+e.role,{method:"GET",headers:A()}).then(function(e){t(e.data)}).catch(function(e){console.log(e),a(e)})})},D=function(e){return new Promise(function(t,a){C()("/api/customer/getById?customerId="+e,{method:"GET",headers:A()}).then(function(e){t(e.data)}).catch(function(e){console.log(e),a(e)})})},O=function(e){function t(e){return Object(m.a)(this,t),Object(p.a)(this,Object(E.a)(t).call(this,e))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;new Promise(function(e,t){C()("/api/customer/all",{method:"GET",headers:A()}).then(function(t){e(t.data)}).catch(function(e){console.log(e),t(e)})}).then(function(t){e.props.setCustomers(t)})}},{key:"render",value:function(){var e=this;return[l.a.createElement("div",{className:"customer-list"},l.a.createElement("table",{className:"table table-bordered",id:"customerList"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Sr. No."),l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Gender"),l.a.createElement("th",null,"Address"),l.a.createElement("th",null,"Mobile"),l.a.createElement("th",null,"Email"),l.a.createElement("th",null,"Remark"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,this.props.customers&&this.props.customers.map(function(t,a){return l.a.createElement("tr",null,l.a.createElement("td",null,a+1),l.a.createElement("td",null,l.a.createElement("label",{type:"text",name:"name",id:"name_".concat(a)},t.name)),l.a.createElement("td",null,l.a.createElement("label",{type:"text",name:"gender",id:"gender_".concat(a)},t.gender)),l.a.createElement("td",null,l.a.createElement("label",{type:"text",name:"address",id:"address_".concat(a)},t.HouseNo+","+t.GaliSector+","+t.Area+","+t.City,l.a.createElement("br",null),""!=t.Landmark&&"LANDMARK:"+t.Landmark)),l.a.createElement("td",null,l.a.createElement("label",{type:"text",name:"mobile",id:"mobile_".concat(a)},t.mobile)),l.a.createElement("td",null,l.a.createElement("label",{type:"text",name:"email",id:"email_".concat(a)},t.email)),l.a.createElement("td",null,l.a.createElement("label",{type:"text",name:"remark",id:"remark_".concat(a)},t.remark)),l.a.createElement("td",null,l.a.createElement("div",null,l.a.createElement("input",{type:"button",name:"Edit",id:"Edit_".concat(a),value:"Edit Customer",onClick:function(){return e.props.openEditCustDialog(t.id)}}),"\xa0",l.a.createElement("input",{type:"button",name:"schedule",id:"Schedule_".concat(a),value:"Schedule",onClick:function(){return e.props.openScheduleDialog(t.id,t.name)}}),"\xa0",l.a.createElement("a",{href:"/user/".concat(t._id),target:"_blank"},"Get Link"))))}))))]}}]),t}(n.Component),N=function(e){function t(e){return Object(m.a)(this,t),Object(p.a)(this,Object(E.a)(t).call(this,e))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return[]}}]),t}(n.Component),x=a(13),j=function(e,t){return x(t+"-"+(e+=1)).daysInMonth()},F=function(e){return["January","February","March","April","May","June","July","August","September","October","November","December"][e]},L=function(){return x()},T=function(e){function t(e){return e<10?"0"+e:e}var a=new Date(e);return[t(a.getDate()),t(a.getMonth()+1),a.getFullYear()].join("/")},M=function(e,t){return new Promise(function(a,n){var l,r;(l="api/auth/login",r={userName:e,password:t},new Promise(function(e,t){C()(w+l,{method:"POST",data:r,headers:A()}).then(function(t){e(t.data)}).catch(function(e){console.log(e),t(e)})})).then(function(l){l&&(l.authdata=window.btoa(e+":"+t),localStorage.setItem("fudbocs",JSON.stringify(l)),a()),n("Error")}).catch(function(e){console.log(e),e.response?n(e.response.data.error):n(e.message)})})},H=function(){localStorage.removeItem("fudbocs")},q=a(147),Y=a(148),P=a(143),Q=a(137),G=a(144),U=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(E.a)(t).call(this,e))).state={},a.handleSubmit=a.handleSubmit.bind(Object(y.a)(Object(y.a)(a))),a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"handleSubmit",value:function(){var e,t=this,a={name:document.getElementById("name").value,gender:document.getElementById("gender_m").checked?"M":"F",HouseNo:document.getElementById("houseno").value,GaliSector:document.getElementById("galisector").value,Area:document.getElementById("area").value,City:document.getElementById("city").value,Landmark:document.getElementById("landmark").value,mobile:document.getElementById("mobile").value,email:document.getElementById("email").value,remark:document.getElementById("remarks").value,isActive:1};(e=a,new Promise(function(t,a){C()("/api/customer/add",{method:"POST",data:e,headers:A()}).then(function(e){t(e.data)}).catch(function(e){console.log(e),a(e)})})).then(function(e){t.props.setCustomers(e),t.props.handelCloseAddCustomer()})}},{key:"render",value:function(){var e=this;return[l.a.createElement(q.a,{title:"Add Customer",show:!0,onHide:this.props.handelCloseAddCustomer},l.a.createElement(q.a.Header,{closeButton:!0},l.a.createElement(q.a.Title,null,"Add Customer")),l.a.createElement(q.a.Body,null,l.a.createElement(Y.a,null,l.a.createElement(Y.a.Group,null,l.a.createElement(Y.a.Label,null,"Customer Name"),l.a.createElement(Y.a.Control,{type:"text",placeholder:"Full Name",id:"name"})),l.a.createElement(Y.a.Group,null,l.a.createElement(Y.a.Label,null,"Gender\xa0\xa0\xa0"),l.a.createElement(Y.a.Check,{inline:!0,id:"gender_m",name:"gender",label:"Male",type:"radio",value:"M",defaultChecked:"true"}),l.a.createElement(Y.a.Check,{inline:!0,id:"gender_f",name:"gender",label:"Female",type:"radio",value:"F"})),l.a.createElement(Y.a.Group,null,l.a.createElement(Y.a.Label,null,"Address"),l.a.createElement(P.a,null,l.a.createElement(Q.a,null,l.a.createElement(Y.a.Control,{type:"text",placeholder:"House No.",id:"houseno"})),l.a.createElement(Q.a,null,l.a.createElement(Y.a.Control,{type:"text",placeholder:"Gali No./Sector",id:"galisector"}))),l.a.createElement(Y.a.Control,{type:"text",placeholder:"Area",id:"area"}),l.a.createElement(Y.a.Control,{type:"text",placeholder:"City",id:"city"}),l.a.createElement(Y.a.Control,{type:"text",placeholder:"Landmark",id:"landmark"})),l.a.createElement(Y.a.Group,null,l.a.createElement(Y.a.Label,null,"Mobile"),l.a.createElement(Y.a.Control,{type:"text",placeholder:"Mobile",id:"mobile"})),l.a.createElement(Y.a.Group,null,l.a.createElement(Y.a.Label,null,"Email"),l.a.createElement(Y.a.Control,{type:"email",placeholder:"Email",id:"email"})),l.a.createElement(Y.a.Group,null,l.a.createElement(Y.a.Label,null,"Remarks (if any)"),l.a.createElement(Y.a.Control,{type:"text",placeholder:"Remarks",id:"remarks"})))),l.a.createElement(q.a.Footer,null,l.a.createElement(G.a,{variant:"primary",onClick:this.handleSubmit},"Submit"),l.a.createElement(G.a,{variant:"secondary",onClick:function(){return e.props.handelCloseAddCustomer()},style:{marginLeft:30}},"Close")))]}}]),t}(l.a.Component),R=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(E.a)(t).call(this,e))).HandleUpdate=a.HandleUpdate.bind(Object(y.a)(Object(y.a)(a))),D(a.props.customerId).then(function(e){document.getElementById("name").value=e.name,"M"==e.gender?document.getElementById("gender_m").checked=!0:document.getElementById("gender_f").checked=!0,document.getElementById("houseno").value=e.HouseNo,document.getElementById("galisector").value=e.GaliSector,document.getElementById("area").value=e.Area,document.getElementById("city").value=e.City,document.getElementById("landmark").value=e.Landmark,document.getElementById("mobile").value=e.mobile,document.getElementById("email").value=e.email,document.getElementById("remarks").value=e.remark,1==e.isActive?document.getElementById("active").checked=!0:document.getElementById("active").checked=!1}),a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"HandleUpdate",value:function(){var e=this;e.setState({isLoading:!0});var t,a={id:this.props.customerId,name:document.getElementById("name").value,gender:document.getElementById("gender_m").checked?"M":"F",HouseNo:document.getElementById("houseno").value,GaliSector:document.getElementById("galisector").value,Area:document.getElementById("area").value,City:document.getElementById("city").value,Landmark:document.getElementById("landmark").value,mobile:document.getElementById("mobile").value,email:document.getElementById("email").value,remark:document.getElementById("remarks").value,isActive:1==document.getElementById("active").checked?1:0};(t=a,new Promise(function(e,a){C()("/api/customer/update",{method:"POST",data:t,headers:A()}).then(function(t){e(t.data)}).catch(function(e){console.log(e),a(e)})})).then(function(t){e.props.setCustomers(t),e.props.handelCloseEditCustomer()})}},{key:"render",value:function(){var e=this;return[l.a.createElement(q.a,{title:"Edit Customer",show:!0,onHide:this.props.handelCloseEditCustomer},l.a.createElement(q.a.Header,{closeButton:!0},l.a.createElement(q.a.Title,null,"Edit Customer")),l.a.createElement(q.a.Body,null,l.a.createElement(Y.a,null,l.a.createElement(Y.a.Group,null,l.a.createElement(Y.a.Label,null,"Customer Name"),l.a.createElement(Y.a.Control,{type:"text",placeholder:"Full Name",id:"name"})),l.a.createElement(Y.a.Group,null,l.a.createElement(Y.a.Label,null,"Gender\xa0\xa0\xa0"),l.a.createElement(Y.a.Check,{inline:!0,id:"gender_m",name:"gender",label:"Male",type:"radio",value:"M"}),l.a.createElement(Y.a.Check,{inline:!0,id:"gender_f",name:"gender",label:"Female",type:"radio",value:"F"})),l.a.createElement(Y.a.Group,null,l.a.createElement(Y.a.Label,null,"Address"),l.a.createElement(P.a,null,l.a.createElement(Q.a,null,l.a.createElement(Y.a.Control,{type:"text",placeholder:"House No.",id:"houseno"})),l.a.createElement(Q.a,null,l.a.createElement(Y.a.Control,{type:"text",placeholder:"Gali No./Sector",id:"galisector"}))),l.a.createElement(Y.a.Control,{type:"text",placeholder:"Area",id:"area"}),l.a.createElement(Y.a.Control,{type:"text",placeholder:"City",id:"city"}),l.a.createElement(Y.a.Control,{type:"text",placeholder:"Landmark",id:"landmark"})),l.a.createElement(Y.a.Group,null,l.a.createElement(Y.a.Label,null,"Mobile"),l.a.createElement(Y.a.Control,{type:"text",placeholder:"Mobile",id:"mobile"})),l.a.createElement(Y.a.Group,null,l.a.createElement(Y.a.Label,null,"Email"),l.a.createElement(Y.a.Control,{type:"email",placeholder:"Email",id:"email"})),l.a.createElement(Y.a.Group,null,l.a.createElement(Y.a.Label,null,"Remarks (if any)"),l.a.createElement(Y.a.Control,{type:"text",placeholder:"Remarks",id:"remarks"})),l.a.createElement(Y.a.Group,null,l.a.createElement(Y.a.Check,{inline:!0,id:"active",name:"active",type:"checkbox",label:"\xa0\xa0Active"})))),l.a.createElement(q.a.Footer,null,l.a.createElement(G.a,{variant:"primary",onClick:this.HandleUpdate},"Update"),l.a.createElement(G.a,{variant:"secondary",onClick:function(){return e.props.handelCloseEditCustomer()},style:{marginLeft:30}},"Close")))]}}]),t}(l.a.Component),W=a(136),J=a(142),K=a(145),z=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(E.a)(t).call(this,e))).state={isDialogOpen:!1,show:!1},a.check=a.check.bind(Object(y.a)(Object(y.a)(a))),a.handleCheckboxClick=a.handleCheckboxClick.bind(Object(y.a)(Object(y.a)(a))),a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"setValues",value:function(e,t,a,n,l,r){if(document.getElementById(e).checked){var c=n?n.amount:l,o=n?n.qty:"1";"user"===r?(document.getElementById(t).innerHTML="Rs. ".concat(c),document.getElementById(a).innerHTML="Qty. ".concat(o)):(document.getElementById(t).value=c,document.getElementById(a).value=o)}else"user"===r?(document.getElementById(t).innerHTML="",document.getElementById(a).innerHTML=""):(document.getElementById(t).value="",document.getElementById(a).value="")}},{key:"handleCheckboxClick",value:function(e,t,a){4===e&&this.setValues("BreakFast_"+t,"Amount_BreakFast_"+t,"Quantity_BreakFast_"+t,this.props.tiffin.breakFast,"20",a),1===e&&this.setValues("Launch_"+t,"Amount_Launch_"+t,"Quantity_Launch_"+t,this.props.tiffin.launch,"45",a),2===e&&this.setValues("Dinner_"+t,"Amount_Dinner_"+t,"Quantity_Dinner_"+t,this.props.tiffin.dinner,"45",a)}},{key:"check",value:function(e,t,a){var n=this.props.check(e,t,a);return n?this.setState({show:!1}):this.setState({show:!0}),n}},{key:"handleTimeout",value:function(e){e.preventDefault(),this.setState({show:!0,msg:"Please call admin(9351275165), if you want to modify schedule for current datetime."})}},{key:"render",value:function(){var e=this,t=this,a=this.props,n=a.role,r=a.date,c=a.id,o=a.tiffin,i=function(e,a,o,i,s,u,d,m){return"user"===n?l.a.createElement("div",null,l.a.createElement(J.a,{type:"checkbox",name:e,id:o,value:a,defaultChecked:u?"checked":"",onClick:function(e){return t.check(n,r,d)?t.handleCheckboxClick(m,c,n):t.handleTimeout(e)},label:a}),u?l.a.createElement("label",{id:i},"Rs. ",u.amount):l.a.createElement("label",{id:i}),l.a.createElement("br",null),u?l.a.createElement("label",{id:s},"Qty. ",u.qty):l.a.createElement("label",{id:s})):l.a.createElement("div",null,l.a.createElement(J.a,{type:"checkbox",name:e,id:o,value:a,defaultChecked:u?"checked":"",onClick:function(e){return t.check(n,r,d)?t.handleCheckboxClick(m,c,n):t.handleTimeout(e)},label:a}),l.a.createElement(W.a,{type:"text",name:"amount",id:i,defaultValue:u?u.amount:"",size:"5"}),l.a.createElement(W.a,{type:"text",name:"quantity",id:s,defaultValue:u?u.qty:"",size:"5"}))};return l.a.createElement("div",null,this.state.show&&l.a.createElement(K.a,{show:this.state.show,dismissable:"true",variant:"danger"},l.a.createElement("p",{className:"d-flex"},this.state.msg,l.a.createElement("div",{className:"justify-content-end"},l.a.createElement("button",{onClick:function(){return e.setState({show:!1})},className:"close"},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))))),l.a.createElement(P.a,{className:"show-grid"},l.a.createElement(Q.a,{md:4,mdPush:4},i("breakFast","Break Fast","BreakFast_"+c,"Amount_BreakFast_"+c,"Quantity_BreakFast_"+c,o.breakFast,"07:00 am",4)),l.a.createElement(Q.a,{md:4,mdull:4},i("launch","Launch","Launch_"+c,"Amount_Launch_"+c,"Quantity_Launch_"+c,o.launch,"10:00 am",1)),l.a.createElement(Q.a,{md:4,mdull:4},i("dinner","Dinner","Dinner_"+c,"Amount_Dinner_"+c,"Quantity_Dinner_"+c,o.dinner,"17:00 pm",2))))}}]),t}(n.Component),V=a(13),Z=a.n(V),$=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(E.a)(t).call(this,e))).saveShedule=a.saveShedule.bind(Object(y.a)(Object(y.a)(a))),a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),a=new Date(e.getFullYear(),e.getMonth()+1,0);console.log(t),console.log(a),document.getElementById("StartDate").value=Z()(t).format("YYYY-MM-DD"),document.getElementById("EndDate").value=Z()(a).format("YYYY-MM-DD")}},{key:"saveShedule",value:function(){var e=this,t=[];document.getElementById("BreakFast_Schedule").checked&&t.push({tiffinType:"4",amount:document.getElementById("Amount_BreakFast_Schedule").value,qty:document.getElementById("Quantity_BreakFast_Schedule").value}),document.getElementById("Launch_Schedule").checked&&t.push({tiffinType:"1",amount:document.getElementById("Amount_Launch_Schedule").value,qty:document.getElementById("Quantity_Launch_Schedule").value}),document.getElementById("Dinner_Schedule").checked&&t.push({tiffinType:"2",amount:document.getElementById("Amount_Dinner_Schedule").value,qty:document.getElementById("Quantity_Dinner_Schedule").value});var a={startDate:document.getElementById("StartDate").value,endDate:document.getElementById("EndDate").value,customerId:this.props.customerId,breakfast:document.getElementById("BreakFast_Schedule").checked?1:0,breakfast_qty:document.getElementById("BreakFast_Schedule").checked?document.getElementById("Quantity_BreakFast_Schedule").value:0,breakfast_amount:document.getElementById("BreakFast_Schedule").checked?document.getElementById("Amount_BreakFast_Schedule").value:0,lunch:document.getElementById("Launch_Schedule").checked?1:0,lunch_qty:document.getElementById("Launch_Schedule").checked?document.getElementById("Quantity_Launch_Schedule").value:0,lunch_amount:document.getElementById("Launch_Schedule").checked?document.getElementById("Amount_Launch_Schedule").value:0,dinner:document.getElementById("Dinner_Schedule").checked?1:0,dinner_qty:document.getElementById("Dinner_Schedule").checked?document.getElementById("Quantity_Dinner_Schedule").value:0,dinner_amount:document.getElementById("Dinner_Schedule").checked?document.getElementById("Amount_Dinner_Schedule").value:0,exclude_MON:document.getElementById("chkbox_mon").checked?1:0,exclude_TUE:document.getElementById("chkbox_tue").checked?1:0,exclude_WED:document.getElementById("chkbox_wed").checked?1:0,exclude_THU:document.getElementById("chkbox_thu").checked?1:0,exclude_FRI:document.getElementById("chkbox_fri").checked?1:0,exclude_SAT:document.getElementById("chkbox_sat").checked?1:0,exclude_SUN:document.getElementById("chkbox_sun").checked?1:0,createdBy:"Admin",bill:t,isActive:1};console.log(a),I(a).then(function(t){e.props.handleClose()})}},{key:"check",value:function(e,t,a){return"user"!==e||!Z()().isAfter(Z()(t))||0===Z()().diff(t,"days")&&!Z()().isAfter(Z()(a,"HH:mm a"))}},{key:"render",value:function(){var e=this;return l.a.createElement(q.a,{title:"Manage Schedule",show:!0,onHide:this.props.handleClose},l.a.createElement(q.a.Header,{closeButton:!0},l.a.createElement(q.a.Title,{id:"example-modal-sizes-title-lg"},"Schedule Preferences : ",this.props.customerName)),l.a.createElement(q.a.Body,null,l.a.createElement("div",null,l.a.createElement(P.a,{className:"show-grid"},l.a.createElement(Q.a,{md:6,mdPush:6},"Start Date: ",l.a.createElement(W.a,{type:"date",name:"startDate",id:"StartDate"})),l.a.createElement(Q.a,{md:6,mdpull:6},"End Date: ",l.a.createElement(W.a,{type:"date",name:"endDate",id:"EndDate"}))),l.a.createElement(z,{id:"Schedule",check:this.check,role:this.props.role,tiffin:{breakFast:{amount:20,qty:1},launch:{amount:45,qty:1},dinner:{amount:45,qty:1}}})," \xa0 \xa0",l.a.createElement("br",null),l.a.createElement("label",null,"Exclude Days:"),"\xa0",l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",id:"chkbox_mon"}),"MON"),"\xa0",l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",id:"chkbox_tue"}),"TUE"),"\xa0",l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",id:"chkbox_wed"}),"WED"),"\xa0",l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",id:"chkbox_thu"}),"THU"),"\xa0",l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",id:"chkbox_fri"}),"FRI"),"\xa0",l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",id:"chkbox_sat"}),"SAT"),"\xa0",l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",id:"chkbox_sun"}),"SUN"),l.a.createElement("br",null))),l.a.createElement(q.a.Footer,null,l.a.createElement(G.a,{variant:"primary",style:{marginLeft:30},onClick:function(){return e.saveShedule()}},"Save"),l.a.createElement(G.a,{variant:"secondary",style:{marginLeft:30},onClick:function(){return e.props.handleClose()}},"Close")))}}]),t}(n.Component),X=a(25),ee=a(146),te=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(E.a)(t).call(this,e))).state={},a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"_updateSchedule",value:function(){var e=this.props,t=[];if(document.getElementById("BreakFast_Update").checked){var a="admin"===this.props.role?document.getElementById("Amount_BreakFast_Update").value:this.props.breakFast?this.props.breakFast.amount:"20",n="admin"===this.props.role?document.getElementById("Quantity_BreakFast_Update").value:this.props.breakFast?this.props.breakFast.qty:"1";t.push({tiffinType:"4",amount:a,qty:n,isActive:1})}else this.props.tiffin.breakFast&&t.push({tiffinType:"4",amount:0,qty:0,isActive:0});if(document.getElementById("Launch_Update").checked){var l="admin"===this.props.role?document.getElementById("Amount_Launch_Update").value:this.props.launch?this.props.launch.amount:"45",r="admin"===this.props.role?document.getElementById("Quantity_Launch_Update").value:this.props.launch?this.props.launch.qty:"1";t.push({tiffinType:"1",amount:l,qty:r,isActive:1})}else this.props.tiffin.launch&&t.push({tiffinType:"1",amount:0,qty:0,isActive:0});if(document.getElementById("Dinner_Update").checked){var c="admin"===this.props.role?document.getElementById("Amount_Dinner_Update").value:this.props.dinner?this.props.dinner.amount:"45",o="admin"===this.props.role?document.getElementById("Quantity_Dinner_Update").value:this.props.dinner?this.props.dinner.qty:"1";t.push({tiffinType:"2",amount:c,qty:o,isActive:1})}else this.props.tiffin.dinner&&t.push({tiffinType:"2",amount:0,qty:0,isActive:0});var i,s={_id:e._id,customerId:e.customerId,index:e.index,date:e.date,bill:t,role:e.role,isActive:1};(i=s,new Promise(function(e,t){C()("/api/schedule/update",{method:"POST",data:i,headers:A()}).then(function(t){e(t.data)}).catch(function(e){console.log(e),t(e)})})).then(function(t){e.handleClose(),e.setSchedule(t)})}},{key:"check",value:function(e,t,a){return"user"!==e||!Z()().isAfter(Z()(t))||0===Z()().diff(t,"days")&&!Z()().isAfter(Z()(a,"HH:mm a"))}},{key:"render",value:function(){var e=this,t=this.props,a=t.role,n=t.date,r=t.tiffin;return[l.a.createElement(q.a,{title:"Update Schedule",show:!0,onHide:this.props.handleClose},l.a.createElement(q.a.Header,{closeButton:!0},l.a.createElement(q.a.Title,{id:"example-modal-sizes-title-lg"},"Schedule Tiffin - ",T(n))),l.a.createElement(q.a.Body,null,l.a.createElement(z,{check:this.check,role:a,id:"Update",tiffin:r,date:n})),l.a.createElement(q.a.Footer,null,l.a.createElement(ee.a,null,this.check(a,n,"23:59 pm")?l.a.createElement(G.a,{variant:"primary",name:"updateSchedule",id:"UpdateShedule",value:"Update",onClick:function(){return e._updateSchedule()}},"Update"):l.a.createElement(G.a,{disabled:!0,variant:"primary",name:"updateSchedule",id:"UpdateShedule",value:"Update"},"Update"),l.a.createElement(G.a,{variant:"secondary",style:{marginLeft:30},onClick:function(){return e.props.handleClose()}},"Close"))))]}}]),t}(n.Component),ae=[{text:"Amount:",main:"$20,000.00",icon:"fa fa-money"},{text:"Shipping Address:",main:"123 Los Olas Blvd, Ste. 101, Fort Lauderdale, FL 33301 USA",icon:"fa fa-map-marker"},{text:"Issuer:",main:"Allied Steel Buildings",icon:"fa fa-star-o"},{text:"Confirmation No:",main:"878NJDBW8Y9",icon:"fa fa-list-alt"}],ne=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(p.a)(this,Object(E.a)(t).call(this))).printBill=function(){window.print()},e.state={breakdown:{}},e.printBill=e.printBill.bind(Object(y.a)(Object(y.a)(e))),e}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){this.setState({breakdown:ae})}},{key:"render",value:function(){return l.a.createElement("div",{className:"receipt"},l.a.createElement("table",{className:"receipt-table",cellspacing:"0",rowspacing:"0"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{className:"left-section head"}),l.a.createElement("th",{className:"right-section"},l.a.createElement("div",null,l.a.createElement("div",{className:"float-left"},l.a.createElement("strong",{className:"recipt-logo"},"FudBocs")," ",l.a.createElement("br",null)," 11/517 ",l.a.createElement("br",null)," Chopasani Housing Board ",l.a.createElement("br",null)," Jodhpur, Rajasthan 342008 ",l.a.createElement("br",null)," India"),l.a.createElement("div",{className:"float-right"},l.a.createElement("img",{src:"./images/foodbox_public_boot_images_logo.png",className:"height-115"}),l.a.createElement("div",{className:"reciept-tag"},"Accha Khao Accha Khilao")))))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{className:"left-section receipt-row-border-left"}),l.a.createElement("td",{className:"right-section receipt-row-border-right"},l.a.createElement("div",null,l.a.createElement("div",{className:"float-left"},l.a.createElement("strong",null,"To,")),l.a.createElement("div",{className:"float-right"})))),l.a.createElement("tr",null,l.a.createElement("td",{className:"left-section receipt-row-border-left"}),l.a.createElement("td",{className:"right-section receipt-row-border-right"},l.a.createElement("div",null,l.a.createElement("div",{className:"float-left"},"Mukesh Purohit"),l.a.createElement("div",{className:"float-right"},l.a.createElement("strong",null,"Currency:")," INR")))),l.a.createElement("tr",null,l.a.createElement("td",{className:"left-section receipt-row-border-left"}),l.a.createElement("td",{className:"right-section receipt-row-border-right"},l.a.createElement("div",null,l.a.createElement("div",{className:"float-left"},"Jodhpur, Rani Station "),l.a.createElement("div",{className:"float-right"},l.a.createElement("strong",null,"Issue Date:")," 23/23/2323")))),l.a.createElement("tr",null,l.a.createElement("td",{className:"left-section receipt-row-border-left"}),l.a.createElement("td",{className:"right-section receipt-row-border-right"},l.a.createElement("div",null,l.a.createElement("div",{className:"float-left"},"  asdkfasldf, asdfasdf"),l.a.createElement("div",{className:"float-right"},l.a.createElement("strong",null,"Due Date:")," 12/12/1212")))),l.a.createElement("tr",null,l.a.createElement("td",{className:"left-section receipt-row-border-left"}),l.a.createElement("td",{className:"right-section receipt-row-border-right"},l.a.createElement("div",null,l.a.createElement("div",{className:"float-left"},"234213123"),l.a.createElement("div",{className:"float-right"}," ")))),l.a.createElement("tr",null,l.a.createElement("td",{className:"left-section receipt-row-border-left"}),l.a.createElement("td",{className:"right-section receipt-row-border-right"})),l.a.createElement("tr",null,l.a.createElement("td",{className:"left-section receipt-row-border-left"}),l.a.createElement("td",{className:"right-section receipt-row-border-right"})),l.a.createElement("tr",null,l.a.createElement("td",{className:"left-section receipt-row-border-left"}),l.a.createElement("td",{className:"right-section receipt-row-border-right"},l.a.createElement("strong",{className:"reciept-invoice-font"},"INVOICE #100"))),l.a.createElement("tr",null,l.a.createElement("td",{className:"left-section receipt-row-border-left"}),l.a.createElement("td",{className:"right-section receipt-row-border-right"})),l.a.createElement("tr",null,l.a.createElement("td",{className:"left-section receipt-row-border-left"}),l.a.createElement("td",{className:"right-section receipt-row-border-right"})),l.a.createElement("tr",null,l.a.createElement("td",{className:"left-section receipt-row-border-left"}),l.a.createElement("td",{className:"right-section receipt-row-border-right receipt-row-border-bottom"},l.a.createElement("table",null,l.a.createElement("th",null,l.a.createElement("td",{className:"width-160"},"Item"),l.a.createElement("td",{className:"width-400"},"Quantity"),l.a.createElement("td",{className:"width-160"},"Price"),l.a.createElement("td",{className:"width-160"},"Total"))))),l.a.createElement("tr",null,l.a.createElement("td",{className:"left-section receipt-row-border-left"},"1."),l.a.createElement("td",{className:"right-section receipt-row-border-right"},l.a.createElement("table",null,l.a.createElement("tr",null,l.a.createElement("td",{className:"width-160"},"Tiffin"),l.a.createElement("td",{className:"width-400"},"13"),l.a.createElement("td",{className:"width-160"},"$50.00"),l.a.createElement("td",{className:"width-160"},"$500.00"))))),l.a.createElement("tr",null,l.a.createElement("td",{className:"left-section receipt-row-border-left"}),l.a.createElement("td",{className:"right-section receipt-row-border-right receipt-row-border-top"})),l.a.createElement("tr",null,l.a.createElement("td",{className:"left-section receipt-row-border-left"}),l.a.createElement("td",{className:"right-section receipt-row-border-right"},l.a.createElement("div",null,l.a.createElement("div",{className:"float-left"}),l.a.createElement("div",{className:"float-right"}," ",l.a.createElement("strong",null,"TOTAL:")," $1231.03")))),l.a.createElement("tr",null,l.a.createElement("td",{className:"left-section receipt-row-border-left"}),l.a.createElement("td",{className:"right-section receipt-row-border-right receipt-row-border-bottom"},l.a.createElement("div",null,l.a.createElement("div",{className:"float-left"}),l.a.createElement("div",{className:"float-right"}," ",l.a.createElement("strong",null,"PAID:")," $0.00")))),l.a.createElement("tr",null,l.a.createElement("td",{className:"left-section receipt-row-border-left"}),l.a.createElement("td",{className:"right-section receipt-row-border-right receipt-row-border-bottom-red"},l.a.createElement("div",null,l.a.createElement("div",{className:"float-left"}),l.a.createElement("div",{className:"float-right"}," ",l.a.createElement("strong",null,"AMOUNT DUE:")," $12312.22")))),l.a.createElement("tr",null,l.a.createElement("td",{className:"left-section receipt-row-border-left"}),l.a.createElement("td",{className:"right-section receipt-row-border-right"})),l.a.createElement("tr",null,l.a.createElement("td",{className:"left-section receipt-row-border-left"}),l.a.createElement("td",{className:"right-section receipt-row-border-right"})))))}}]),t}(l.a.Component),le=(l.a.Component,function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.details;return l.a.createElement("li",null,l.a.createElement("span",{className:e.icon}),l.a.createElement("div",{className:"list-content"},l.a.createElement("p",null,e.text,l.a.createElement("span",{className:"list-bold"},e.main))))}}]),t}(l.a.Component)),re=(l.a.Component,function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"overview-header"},l.a.createElement("img",{className:"logo",src:this.props.logo}),l.a.createElement("div",{className:"timestamp"},l.a.createElement("span",null,"20 Deccember, 2016"),l.a.createElement("span",null,"08:30:57 EST")),l.a.createElement("hr",null))}}]),t}(l.a.Component)),ce=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"purchase-overview"},l.a.createElement("h3",null,this.props.product))}}]),t}(l.a.Component),oe=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"overview-body"},l.a.createElement(ce,this.props),l.a.createElement("div",{className:"user-info"},l.a.createElement("p",{className:"user-info-name"}," Hello ",this.props.name,","),l.a.createElement("p",{className:"user-info-text"}," You sent a payment of ",l.a.createElement("span",null,this.props.value)," to ",this.props.merchant,". (",l.a.createElement("a",{href:"mailto: info@alliedbuildings.com"},this.props.merchantEmail),").  One of our experienced project managers will be in touch with you shortly to review your building specifications."),l.a.createElement("p",null,"Thank you for choosing Allied."),l.a.createElement("p",{className:"salutation"},l.a.createElement("img",{src:"https://ec2-52-40-174-59.us-west-2.compute.amazonaws.com/banners/about_us_pic.png"}))),l.a.createElement("div",{className:"descriptor"},l.a.createElement("p",null,"It may take a few moments for this transaction to appear in your account")))}}]),t}(l.a.Component),ie=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return l.a.createElement("footer",{className:"overview-footer"},l.a.createElement("span",{className:"site"},l.a.createElement("a",{href:"http://www.alliedbuildings.com/contact-us/",target:"_blank"},"www.allied.build/help")),l.a.createElement("span",{className:"invoice-id"},"+1.877.94 STEEL"))}}]),t}(l.a.Component),se=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(E.a)(t).call(this,e))).setSchedule=function(e){a.setState({schedule:e})},a.createCalendar=function(e){for(var t=j(e.month(),e.year()),n=[],r=[],c=e.startOf("month").get("day"),o=1;o<c;o++)r.push(l.a.createElement("td",null));c=8-c;for(var i=function(t){u=a.isDateExistInSchedule(t,e.month()+1,e.year()),0!=a.state.Start_Stop_Click&&(0!=a.state.StopDay&&t>=a.state.StopDay&&0!=a.state.StartDay&&t<a.state.StartDay?u=a.getColorCode(a.state.chk_breakfast,a.state.chk_launch,a.state.chk_dinner):0!=a.state.StopDay&&0==a.state.StartDay&&t>=a.state.StopDay?u=a.getColorCode(a.state.chk_breakfast,a.state.chk_launch,a.state.chk_dinner):0!=a.state.StartDay&&0==a.state.StopDay&&t>=a.state.StartDay&&(u=a.getColorCode(a.state.chk_breakfast,a.state.chk_launch,a.state.chk_dinner))),t%c===0?(c+=7,r.push(l.a.createElement("td",{className:u&&u.colorCode,onClick:function(){return a.updateSchedule(u&&u.index,t,e,u&&u.colorCode)}},t)),n.push(l.a.createElement("tr",null,r)),r=[]):r.push(l.a.createElement("td",{className:u&&u.colorCode,onClick:function(){return a.updateSchedule(u&&u.index,t,e,u&&u.colorCode)}},t))},s=1;s<=t;s++){var u;i(s)}return r.length>0&&n.push(l.a.createElement("tr",null,r)),n},a.HandleStartStopDates_onClick=function(e){a.setState({showDialog:!1}),"StopFrom"==e.target.id&&a.setState({Start_Stop_Click:1}),"StartFrom"==e.target.id&&a.setState({Start_Stop_Click:2})},a.HandleStartStopDates_onChange=function(e){var t=e.target;"StopFrom"==t.id&&a.setState({StopDay:t.value.substr(0,2)}),"StartFrom"==t.id&&a.setState({StartDay:t.value.substr(0,2)})},a.state={showDialog:!1,Start_Stop_Click:0,StopDay:0,StartDay:0,chk_breakfast:!1,chk_launch:!1,chk_dinner:!1,SaveLoading:!1},a._getSchedule=a._getSchedule.bind(Object(y.a)(Object(y.a)(a))),a.handleClose=a.handleClose.bind(Object(y.a)(Object(y.a)(a))),a.HandleStartStopDates_onClick=a.HandleStartStopDates_onClick.bind(Object(y.a)(Object(y.a)(a))),a.HandleStartStopDates_onChange=a.HandleStartStopDates_onChange.bind(Object(y.a)(Object(y.a)(a))),a.HandleSaveCalender=a.HandleSaveCalender.bind(Object(y.a)(Object(y.a)(a))),a.setSchedule=a.setSchedule.bind(Object(y.a)(Object(y.a)(a))),a.HandleCheckTiffin=a.HandleCheckTiffin.bind(Object(y.a)(Object(y.a)(a))),a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this._getSchedule(L().format("YYYY-MM-DD"))}},{key:"handleClose",value:function(){this.setState({showDialog:!1})}},{key:"updateSchedule",value:function(e,t,a,n,l){if(1==this.state.Start_Stop_Click)document.getElementById("StopFrom").value=Z()([a.year(),a.month(),t]).format("DD-MM-YYYY"),this.setState({StopDay:t});else if(2==this.state.Start_Stop_Click){document.getElementById("StartFrom").value=Z()([a.year(),a.month(),t]).format("DD-MM-YYYY"),this.setState({StartDay:t})}else{var r=a.year()+"-"+(a.month()+1)+"-"+t,c={};this.state.schedule.map(function(e){e.day===t&&(1===e.tiffinType&&(c=Object(X.a)({},c,{launch:{amount:e.amount,qty:e.qty}})),2===e.tiffinType&&(c=Object(X.a)({},c,{dinner:{amount:e.amount,qty:e.qty}})),4===e.tiffinType&&(c=Object(X.a)({},c,{breakFast:{amount:e.amount,qty:e.qty}})))}),this.setState({showDialog:!0,index:e,date:r,tiffin:c})}}},{key:"_getSchedule",value:function(e){var t=this;B({customerId:this.props.customerId,date:e,role:"admin"}).then(function(e){e.length>0&&t.setState({schedule:e})})}},{key:"isDateExistInSchedule",value:function(e,t,a){var n=void 0,l="";return this.state.schedule&&(this.state.schedule||[]).map(function(n,r){Z()(a+"-"+t+"-"+e).isSame(Z()(a+"-"+t+"-"+n.day))&&n.qty>0&&(l+=n.tiffinType)}),l.indexOf("1")>-1&&l.indexOf("2")>-1?n={colorCode:"both",index:e}:l.indexOf("1")>-1?n={colorCode:"launch",index:e}:l.indexOf("2")>-1?n={colorCode:"dinner",index:e}:""===l&&(n={colorCode:"",index:e}),n}},{key:"getColorCode",value:function(e,t,a){return t&&a?{colorCode:"both"}:t?{colorCode:"launch"}:a?{colorCode:"dinner"}:{colorCode:""}}},{key:"HandleCheckTiffin",value:function(e,t,a){return document.getElementById("BreakFast_StopStart").checked?this.setState({chk_breakfast:!0}):this.setState({chk_breakfast:!1}),document.getElementById("Launch_StopStart").checked?this.setState({chk_launch:!0}):this.setState({chk_launch:!1}),document.getElementById("Dinner_StopStart").checked?this.setState({chk_dinner:!0}):this.setState({chk_dinner:!1}),"user"!==e||!Z()().isAfter(Z()(t))||0===Z()().diff(t,"days")&&!Z()().isAfter(Z()(a,"HH:mm a"))}},{key:"HandleSaveCalender",value:function(){var e=this;e.setState({SaveLoading:!0});var t=this.props,a=[];if(document.getElementById("BreakFast_StopStart").checked){var n="admin"===this.props.role?document.getElementById("Amount_BreakFast_StopStart").value:this.props.breakFast?this.props.breakFast.amount:"20",l="admin"===this.props.role?document.getElementById("Quantity_BreakFast_StopStart").value:this.props.breakFast?this.props.breakFast.qty:"1";a.push({tiffinType:"4",amount:n,qty:l,isActive:1})}else a.push({tiffinType:"4",amount:0,qty:0,isActive:0});if(document.getElementById("Launch_StopStart").checked){var r="admin"===this.props.role?document.getElementById("Amount_Launch_StopStart").value:this.props.launch?this.props.launch.amount:"45",c="admin"===this.props.role?document.getElementById("Quantity_Launch_StopStart").value:this.props.launch?this.props.launch.qty:"1";a.push({tiffinType:"1",amount:r,qty:c,isActive:1})}else a.push({tiffinType:"1",amount:0,qty:0,isActive:0});if(document.getElementById("Dinner_StopStart").checked){var o="admin"===this.props.role?document.getElementById("Amount_Dinner_StopStart").value:this.props.dinner?this.props.dinner.amount:"45",i="admin"===this.props.role?document.getElementById("Quantity_Dinner_StopStart").value:this.props.dinner?this.props.dinner.qty:"1";a.push({tiffinType:"2",amount:o,qty:i,isActive:1})}else a.push({tiffinType:"2",amount:0,qty:0,isActive:0});var s=[],u=0,d=0;if(0==e.state.StopDay&&0!=e.state.StartDay){u=e.state.StartDay;var m=document.getElementById("StartFrom").value;d=j(m.substr(3,2),m.substr(6))}if(0==e.state.StartDay&&0!=e.state.StopDay){u=e.state.StopDay;var h=document.getElementById("StopFrom").value;d=j(h.substr(3,2),h.substr(6))}0!=e.state.StartDay&&0!=e.state.StopDay&&(u=e.state.StopDay,d=e.state.StartDay-1);for(var p=u;p<=d;p++)s.push(p);var E,f={customerId:t.customerId,scheduleId:e.state.schedule[0].id,bill:a,role:e.props.role,isActive:1,CalenderDays:s};(E=f,new Promise(function(e,t){C()("/api/schedule/updatefrom",{method:"POST",data:E,headers:A()}).then(function(t){e(t.data)}).catch(function(e){console.log(e),t(e)})})).then(function(t){e.setSchedule(t),e.setState({SaveLoading:!1}),e.setState({Start_Stop_Click:0}),e.setState({StopDay:0}),e.setState({StartDay:0}),document.getElementById("StartFrom").value="",document.getElementById("StopFrom").value=""})}},{key:"render",value:function(){var e=this;return l.a.createElement(q.a,{title:"Manage Schedule",show:!0,onHide:this.props.handleClose},l.a.createElement(q.a.Header,{closeButton:!0},l.a.createElement(q.a.Title,{id:"example-modal-sizes-title-lg"},"Tiffin Calendar : ",this.props.customerName)),l.a.createElement(q.a.Body,null,l.a.createElement("div",null,l.a.createElement(P.a,{className:"show-grid"},l.a.createElement(Q.a,{md:6,mdPush:6},"Stop From: ",l.a.createElement(W.a,{name:"StopFrom",id:"StopFrom",placeholder:"Choose Date from Calender",onClick:this.HandleStartStopDates_onClick,onChange:this.HandleStartStopDates_onChange})),l.a.createElement(Q.a,{md:6,mdpull:6},"Start From: ",l.a.createElement(W.a,{name:"StartFrom",id:"StartFrom",placeholder:"Choose Date from Calender",onClick:this.HandleStartStopDates_onClick,onChange:this.HandleStartStopDates_onChange})))),0!=this.state.Start_Stop_Click&&l.a.createElement(z,{id:"StopStart",check:this.HandleCheckTiffin,role:this.props.role,tiffin:{}})),l.a.createElement(v.a,{active:this.state.SaveLoading,spinner:!0,text:"Loading .."}),l.a.createElement("div",{className:"month"},l.a.createElement("ul",null,l.a.createElement("li",{className:"prev"},"\u276e"),l.a.createElement("li",{className:"next"},"\u276f"),l.a.createElement("li",null,F(L().month()),l.a.createElement("br",null),l.a.createElement("span",null,L().year())))),l.a.createElement("table",{className:"weekdays"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Mo"),l.a.createElement("td",null,"Tu"),l.a.createElement("td",null,"We"),l.a.createElement("td",null,"Th"),l.a.createElement("td",null,"Fr"),l.a.createElement("td",null,"Sa"),l.a.createElement("td",null,"Su"))),l.a.createElement("tbody",{className:"days"},this.createCalendar(L()))),this.state.showDialog&&0==this.state.Start_Stop_Click&&l.a.createElement(te,{role:"admin",index:this.state.index,_id:this.state.schedule[0].id,tiffin:this.state.tiffin,customerId:this.props.customerId,date:this.state.date,setSchedule:this.setSchedule,handleClose:function(){return e.handleClose()}}),l.a.createElement(q.a.Footer,null,0!=this.state.Start_Stop_Click&&l.a.createElement("div",null,l.a.createElement(G.a,{variant:"primary",onClick:this.HandleSaveCalender,disabled:this.state.SaveLoading,style:{marginLeft:30}},"Save")),l.a.createElement(G.a,{variant:"secondary",style:{marginLeft:30},onClick:function(){return e.props.handleClose()}},"Close")))}}]),t}(l.a.Component),ue=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(E.a)(t).call(this,e))).openScheduleDialog=function(e,t){a.setState({customerId:e,customerName:t}),a._CheckScheduleExist(e)},a.handleScheduleClose=function(){return a.setState({ShowSchedulerPref:!1,ShowScheduleCalender:!1})},a.handelCloseAddCustomer=function(){return a.setState({ShowAddCustomer:!1})},a.openEditCustDialog=function(e){return a.setState({ShowEditCustomer:!0,customerId:e})},a.handelCloseEditCustomer=function(){return a.setState({ShowEditCustomer:!1})},a.state={isDialogOpen:!1,isPrint:!1,lgShow:!1,ShowAddCustomer:!1,ShowEditCustomer:!1,ShowSchedulerPref:!1,ShowScheduleCalender:!1,customerId:0,customerName:""},a.setCustomers=a.setCustomers.bind(Object(y.a)(Object(y.a)(a))),a.filterCustomer=a.filterCustomer.bind(Object(y.a)(Object(y.a)(a))),a.print=a.print.bind(Object(y.a)(Object(y.a)(a))),a.printDocument=a.printDocument.bind(Object(y.a)(Object(y.a)(a))),a._CheckScheduleExist=a._CheckScheduleExist.bind(Object(y.a)(Object(y.a)(a))),a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){document.querySelector("#Date_Search").valueAsDate=new Date}},{key:"print",value:function(){this.setState({isPrint:!0,lgShow:!0})}},{key:"resetCustomer",value:function(){var e=this.state.originalList.slice();this.setState({customers:e,originalList:e})}},{key:"setCustomers",value:function(e){this.setState({customers:e,originalList:e})}},{key:"getTiffinType",value:function(){return document.getElementById("BreakFast_Search").checked&&document.getElementById("Launch_Search").checked&&document.getElementById("Dinner_Search")?"BreakFast, Launch and Dinner":document.getElementById("Launch_Search").checked&&document.getElementById("Dinner_Search").checked?"Launch And Dinner":document.getElementById("Launch_Search").checked?"Launch":document.getElementById("Dinner_Search").checked?"Dinner":document.getElementById("BreakFast_Search").checked?"BreakFast":"BreakFast, Launch and Dinner"}},{key:"filterCustomer",value:function(e){var t,a=this,n=this.state.originalList.slice(),l=document.getElementById("FirstName_Search").value,r=document.getElementById("Address_Search").value,c=document.getElementById("Date_Search").value;t=document.getElementById("Launch_Search").checked&&document.getElementById("Dinner_Search").checked?"1,2":document.getElementById("Launch_Search").checked?"1":document.getElementById("Dinner_Search").checked?"2":document.getElementById("BreakFast_Search").checked?"4":"1,2,3,4";var o=[],i=!0;e?(this.setState({isLoading:!0}),function(e,t){return new Promise(function(a,n){C()("/api/customer/filter?date="+e+"&tiffinType="+t,{method:"GET",headers:A()}).then(function(e){a(e.data)}).catch(function(e){console.log(e),n(e)})})}(c,t).then(function(e){a.setState({isLoading:!1});var c=[];n.map(function(e){i=!0,""!==l&&-1===e.name.toLowerCase().indexOf(l.toLowerCase())&&(i=!1),""!==r&&-1===e.address.toLowerCase().indexOf(r.toLowerCase())&&(i=!1),e.TiffinType&&""!==t&&-1===e.TiffinType.indexOf(t)&&(i=!1),i&&c.push(e)}),c.map(function(t){i=!1,e&&e.length>0&&(e.map(function(e){t._id===e._id&&(i=!0)}),i&&o.push(t))}),a.setState({customers:o})})):(n.map(function(e){i=!0,""!==l&&-1===e.name.toLowerCase().indexOf(l.toLowerCase())&&(i=!1),""!==r&&-1===e.address.toLowerCase().indexOf(r.toLowerCase())&&(i=!1),e.TiffinType&&""!==t&&-1===e.TiffinType.indexOf(t)&&(i=!1),i&&o.push(e)}),this.setState({customers:o}))}},{key:"_CheckScheduleExist",value:function(e){var t,a=this,n=L().format("YYYY-MM-DD");(t={customerId:e,date:n,role:"admin"},new Promise(function(e,a){C()("/api/schedule/exist?customerId="+t.customerId+"&date="+t.date+"&role="+t.role,{method:"GET",headers:A()}).then(function(t){e(t.data.schedule_exist)}).catch(function(e){console.log(e),a(e)})})).then(function(e){e>0?a.setState({ShowSchedulerPref:!1,ShowScheduleCalender:!0}):a.setState({ShowSchedulerPref:!0,ShowScheduleCalender:!1})})}},{key:"printDocument",value:function(){var e=this,t=new b.a("l","pt","a4"),a=document.getElementById("customerList").cloneNode(!0);a.deleteRow(0);for(var n=0;n<a.rows.length;n++)a.rows[n].deleteCell(2),a.rows[n].deleteCell(2),a.rows[n].deleteCell(5);var l=t.autoTableHtmlToJson(a);t.internal.getNumberOfPages();t.autoTable(l.columns,l.data,{didDrawPage:function(a){t.setFontSize(18),t.setTextColor(40),t.setFontStyle("normal"),t.text("Customer Tiffin List for "+e.getTiffinType()+" at "+(new x).format("DD-MM-YYYY HH:mm:ss"),a.settings.margin.left,50);var n="Page "+a.pageCount;"function"===typeof t.putTotalPages&&(n=n),t.setFontSize(10),t.text(n,a.settings.margin.left,t.internal.pageSize.height-10)},startY:60,drawHeaderRow:function(e,t){e.height=46},drawHeaderCell:function(e,a){t.rect(e.x,e.y,e.width,e.height,e.styles.fillStyle),t.setFillColor(230),t.rect(e.x,e.y+e.height/2,e.width,e.height/2,e.styles.fillStyle),t.autoTableText(e.text,e.textPos.x,e.textPos.y,{halign:e.styles.halign,valign:e.styles.valign}),t.setTextColor(100);var n=a.table.rows[0].cells[a.column.dataKey].text;return t.autoTableText(n,e.textPos.x,e.textPos.y+e.height/2,{halign:e.styles.halign,valign:e.styles.valign}),!1},drawRow:function(e,t){if(0===e.index)return!1},margin:{top:60},styles:{overflow:"linebreak",fontSize:10,tableWidth:"auto",cellWidth:"auto"},columnStyles:{text:{columnWidth:"wrap"},columnName1:{columnWidth:45,fontStyle:"bold",textColor:240},description:{columnWidth:107},columnName2:{columnWidth:45},columnName3:{columnWidth:45},columnName4:{columnWidth:45}},bodyStyles:{valign:"middle"},theme:"grid"}),t.save("Customer_List_"+(new x).format("DD-MM-YYYY")+".pdf")}},{key:"render",value:function(){var e=this;return[l.a.createElement("div",{className:"App"},l.a.createElement(v.a,{active:this.state.isLoading,spinner:!0,text:"Loading your content..."}),l.a.createElement("div",{className:"header"},l.a.createElement("div",{className:"flex"},l.a.createElement("div",{className:"width90"},l.a.createElement("h3",null,"Tiffin Management System")),l.a.createElement("span",null,l.a.createElement("a",{href:"#",onClick:H},"LOGOUT"))),l.a.createElement("strong",null,"Filter: "),"Name: ",l.a.createElement("input",{type:"text",id:"FirstName_Search",onChange:function(){return e.filterCustomer(!0)}}),"\xa0 Address: ",l.a.createElement("input",{type:"text",id:"Address_Search",onChange:function(){return e.filterCustomer(!0)}}),"\xa0 ",l.a.createElement("input",{type:"checkbox",name:"breakFast",id:"BreakFast_Search",value:"Break Fast"})," ",l.a.createElement("label",{for:"BreakFast_Search"},"Break Fast")," | \xa0 ",l.a.createElement("input",{type:"checkbox",name:"launch",id:"Launch_Search",value:"Break Fast"})," ",l.a.createElement("label",{for:"Launch_Search"},"Lunch")," | \xa0 ",l.a.createElement("input",{type:"checkbox",name:"dinner",id:"Dinner_Search",value:"Break Fast"})," ",l.a.createElement("label",{for:"Dinner_Search"},"Dinner")," | \xa0 Date: ",l.a.createElement("input",{type:"date",id:"Date_Search",min:"2018-11-30"}),"\xa0 ",l.a.createElement("input",{className:"btn cta sm",type:"button",id:"Search",value:"Search",onClick:function(){return e.filterCustomer(!0)}}),"\xa0 ",l.a.createElement("input",{className:"btn secondary sm",type:"button",id:"Reset",value:"Reset",onClick:function(){return e.resetCustomer()}}),"\xa0 ",l.a.createElement("input",{className:"btn cta sm",type:"button",id:"Print",value:"Print",onClick:function(){return e.printDocument()}})),l.a.createElement("hr",null),l.a.createElement("div",{style:{textAlign:"left",paddingLeft:10}},l.a.createElement("a",{href:"#",onClick:function(){return e.setState({ShowAddCustomer:!0})}},"Add Customer"),this.state.ShowAddCustomer&&l.a.createElement(U,{setCustomers:this.setCustomers,handelCloseAddCustomer:this.handelCloseAddCustomer,role:"admin"})),l.a.createElement(O,{setCustomers:this.setCustomers,customers:this.state.customers,openScheduleDialog:this.openScheduleDialog,openEditCustDialog:this.openEditCustDialog,role:"admin"}),this.state.ShowEditCustomer&&l.a.createElement(R,{setCustomers:this.setCustomers,customerId:this.state.customerId,handelCloseEditCustomer:this.handelCloseEditCustomer,role:"admin"}),"}",this.state.ShowSchedulerPref&&l.a.createElement($,{handleClose:this.handleScheduleClose,customerId:this.state.customerId,customerName:this.state.customerName,role:"admin"}),this.state.ShowScheduleCalender&&l.a.createElement(se,{handleClose:this.handleScheduleClose,customerId:this.state.customerId,customerName:this.state.customerName,role:"admin"}))]}}]),t}(n.Component),de=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(E.a)(t).call(this,e))).printBill=function(){localStorage.setItem("pageData","Data Retrieved from axios request"),window.open("http://localhost:3000/reciept","_blank")},a.setSchedule=function(e){a.setState({schedule:e})},a.createCalendar=function(e){for(var t=j(e.month(),e.year()),n=[],r=[],c=e.startOf("month").get("day"),o=1;o<c;o++)r.push(l.a.createElement("td",null));c=8-c;for(var i=function(t){var o=a.isDateExistInSchedule(t,e.month()+1,e.year());t%c===0?(c+=7,r.push(l.a.createElement("td",{className:o&&o.colorCode,onClick:function(){return a.updateSchedule(o&&o.index,t,e)}},t)),n.push(l.a.createElement("tr",null,r)),r=[]):r.push(l.a.createElement("td",{className:o&&o.colorCode,onClick:function(){return a.updateSchedule(o&&o.index,t,e)}},t))},s=1;s<=t;s++)i(s);return r.length>0&&n.push(l.a.createElement("tr",null,r)),n},a.state={showDialog:!1,printBill:!1,showSchedulerInput:!1},a.saveShedule=a.saveShedule.bind(Object(y.a)(Object(y.a)(a))),a._getSchedule=a._getSchedule.bind(Object(y.a)(Object(y.a)(a))),a.handleClose=a.handleClose.bind(Object(y.a)(Object(y.a)(a))),a.printBill=a.printBill.bind(Object(y.a)(Object(y.a)(a))),a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"saveShedule",value:function(e){var t=this,a=[];document.getElementById("BreakFast_Schedule").checked&&a.push({tiffinType:"4",amount:document.getElementById("Amount_BreakFast_Schedule").value,qty:document.getElementById("Quantity_BreakFast_Schedule").value}),document.getElementById("Launch_Schedule").checked&&a.push({tiffinType:"1",amount:document.getElementById("Amount_Launch_Schedule").value,qty:document.getElementById("Quantity_Launch_Schedule").value}),document.getElementById("Dinner_Schedule").checked&&a.push({tiffinType:"2",amount:document.getElementById("Amount_Dinner_Schedule").value,qty:document.getElementById("Quantity_Dinner_Schedule").value});var n={startDate:document.getElementById("StartDate").value,endDate:document.getElementById("EndDate").value,customerId:this.props.primaryKey,isWeekend:document.getElementById("Yes").checked,bill:a};I(n).then(function(e){console.log("Schedule.............",e),t.setState({schedule:e})})}},{key:"getSnapshotBeforeUpdate",value:function(e,t){return!1}},{key:"componentDidMount",value:function(){var e=this.props.match.params.customerId;console.log("*************",e),this.setState({customerId:e},this._getSchedule("",e));var t=new Date;document.querySelector("#StartDate")&&(document.querySelector("#StartDate").valueAsDate=new Date(t.getFullYear(),t.getMonth(),2)),document.querySelector("#EndDate")&&(document.querySelector("#EndDate").valueAsDate=new Date(t.getFullYear(),t.getMonth()+1,1))}},{key:"handleClose",value:function(){this.setState({showDialog:!1})}},{key:"updateSchedule",value:function(e,t,a,n,l){var r=a.year()+"-"+(a.month()+1)+"-"+t,c={};this.state.schedule.map(function(e){e.day===t&&(1===e.tiffinType&&(c=Object(X.a)({},c,{launch:{amount:e.amount,qty:e.qty}})),2===e.tiffinType&&(c=Object(X.a)({},c,{dinner:{amount:e.amount,qty:e.qty}})),4===e.tiffinType&&(c=Object(X.a)({},c,{breakFast:{amount:e.amount,qty:e.qty}})))}),this.setState({showDialog:!0,index:e,date:r,tiffin:c,isNew:l||!1})}},{key:"_getSchedule",value:function(e,t){var a=this;console.log("this.state***********",this.state),B({customerId:t,date:e}).then(function(e){if(console.log("Schedule.............",e),e.length>0)a.setState({schedule:e,showSchedulerInput:!1});else{a.setState({showSchedulerInput:!0});var t=new Date;document.querySelector("#StartDate")&&(document.querySelector("#StartDate").valueAsDate=new Date(t.getFullYear(),t.getMonth(),2)),document.querySelector("#EndDate")&&(document.querySelector("#EndDate").valueAsDate=new Date(t.getFullYear(),t.getMonth()+1,1))}})}},{key:"isDateExistInSchedule",value:function(e,t,a){var n=void 0,l="";return this.state.schedule&&(this.state.schedule||[]).map(function(n,r){Z()(a+"-"+t+"-"+e).isSame(Z()(a+"-"+t+"-"+n.day))&&n.qty>0&&(l+=n.tiffinType)}),l.indexOf("1")>-1&&l.indexOf("2")>-1?n={colorCode:"both",index:e}:l.indexOf("1")>-1?n={colorCode:"launch",index:e}:l.indexOf("2")>-1?n={colorCode:"dinner",index:e}:""===l&&(n={colorCode:"",index:e}),n}},{key:"render",value:function(){var e=this;return this.state.schedule?(console.log("(((((((((((((",this.state.schedule),l.a.createElement("div",{className:"page-center"},l.a.createElement("label",null,l.a.createElement("strong",null,this.state.schedule&&this.state.schedule[0].name)," Tiffing Schedule"),l.a.createElement("hr",null),this.state.showSchedulerInput&&l.a.createElement("div",null,l.a.createElement(P.a,{className:"show-grid"},l.a.createElement(Q.a,{md:6,mdPush:6},"Start Date: ",l.a.createElement(W.a,{type:"date",name:"startDate",id:"StartDate"})),l.a.createElement(Q.a,{md:6,mdpull:6},"End Date: ",l.a.createElement(W.a,{type:"date",name:"endDate",id:"EndDate"}))),l.a.createElement(z,{id:"Schedule",tiffin:{breakFast:{amount:20,qty:1},launch:{amount:40,qty:1},dinner:{amount:40,qty:1}}})," \xa0 \xa0",l.a.createElement("br",null),l.a.createElement("label",null,"Include Weekends:")," \xa0",l.a.createElement("input",{type:"radio",id:"Yes",name:"drone",value:"yes",checked:!0}),l.a.createElement("label",{htmlFor:"Yes"},"Yes"),"\xa0",l.a.createElement("input",{type:"radio",id:"No",name:"drone",value:"no"}),l.a.createElement("label",{htmlFor:"No"},"No")," ",l.a.createElement("br",null),l.a.createElement("input",{type:"button",name:"saveSchedule",id:"SaveShedule",value:"Save",onClick:function(){return e.saveShedule(e.state.customerId)}})),l.a.createElement("div",{className:"month"},l.a.createElement("ul",null,l.a.createElement("li",{className:"prev"},"\u276e"),l.a.createElement("li",{className:"next"},"\u276f"),l.a.createElement("li",null,F(L().month()),l.a.createElement("br",null),l.a.createElement("span",null,L().year())))),l.a.createElement("table",{className:"weekdays"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Mo"),l.a.createElement("td",null,"Tu"),l.a.createElement("td",null,"We"),l.a.createElement("td",null,"Th"),l.a.createElement("td",null,"Fr"),l.a.createElement("td",null,"Sa"),l.a.createElement("td",null,"Su"))),l.a.createElement("tbody",{className:"days"},this.createCalendar(L()))),this.state.showDialog&&l.a.createElement(te,{role:"user",isNew:this.state.isNew,index:this.state.index,_id:this.state.schedule[0].id,tiffin:this.state.tiffin,customerId:this.state.customerId,date:this.state.date,setSchedule:this.setSchedule,handleClose:function(){return e.handleClose()}}))):l.a.createElement("div",null,"Please wait, data is loading...")}}]),t}(n.Component),me=a(42),he=(a(139),function(e){function t(e){var a;return Object(m.a)(this,t),a=Object(p.a)(this,Object(E.a)(t).call(this,e)),H(),a.state={username:"",password:"",submitted:!1,loading:!1,error:""},a.handleChange=a.handleChange.bind(Object(y.a)(Object(y.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(y.a)(Object(y.a)(a))),a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(me.a)({},a,n))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this;this.setState({submitted:!0});var n=this.state,l=n.username,r=n.password;n.returnUrl;l&&r&&(this.setState({loading:!0}),M(l,r).then(function(e){var a=(t.props.location.state||{from:{pathname:"/"}}).from;t.props.history.push(a)},function(e){return t.setState({error:e,loading:!1})}).catch(function(e){console.log("Error",e),a.setState({error:e,loading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.username,a=e.password,n=e.submitted,r=e.loading,c=e.error;return l.a.createElement("div",{className:"col-md-6 col-md-offset-3 login"},l.a.createElement("div",{className:"card card-signin"},l.a.createElement("div",{className:"card-body"},l.a.createElement("h5",{className:"card-title text-center"},"Fudbocs Login"),l.a.createElement("form",{name:"form",onSubmit:this.handleSubmit},l.a.createElement("div",{className:"form-group"+(n&&!t?" has-error":"")},l.a.createElement("label",{htmlFor:"username"},"Username"),l.a.createElement("input",{type:"text",className:"form-control",name:"username",value:t,onChange:this.handleChange}),n&&!t&&l.a.createElement("div",{className:"help-block"},"Username is required")),l.a.createElement("div",{className:"form-group"+(n&&!a?" has-error":"")},l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("input",{type:"password",className:"form-control",name:"password",value:a,onChange:this.handleChange}),n&&!a&&l.a.createElement("div",{className:"help-block"},"Password is required")),l.a.createElement("div",{className:"form-group"},l.a.createElement("button",{className:"btn btn-lg btn-primary btn-block text-uppercase",disabled:r},"Sign in"),r&&l.a.createElement("img",{src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="})),c&&l.a.createElement("div",{className:"alert alert-danger"},c)))))}}]),t}(l.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(o.a,null,l.a.createElement(i.a,null,l.a.createElement(function(e){var t=e.component,a=Object(u.a)(e,["component"]);return l.a.createElement(s.a,Object.assign({},a,{render:function(e){return localStorage.getItem("fudbocs")?l.a.createElement(t,e):l.a.createElement(d.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},{exact:!0,path:"/",component:ue}),l.a.createElement(s.a,{path:"/login",component:he}),l.a.createElement(s.a,{path:"/user/:customerId",component:de}),l.a.createElement(s.a,{path:"/reciept",component:ne}),l.a.createElement(s.a,{path:"/print-customer",component:N}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},59:function(e,t,a){},79:function(e,t,a){e.exports=a(141)},87:function(e,t,a){}},[[79,2,1]]]);
//# sourceMappingURL=main.f239578a.chunk.js.map